<!DOCTYPE html>
<html lang="sl">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="../../css/universal.css">
  <link rel="stylesheet" type="text/css" href="../../css/teorija.css">
  <link rel="stylesheet" type="text/css" href="kompleksna_igra.css">
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <title>Kompleksna števila</title>
</head>

<body>
  <header>
    <h1>Kompleksna števila</h1>
  </header>
  <!-- Navigacija -->
  <nav>
    <div class="drzalo">
      <div class="nav-element" id="domov"><a href="../../index.html">Uvodna stran</a></div>
      <div class="teorija">
        <div class="nav-element"><a href="../../Teorija/Kompleksna_stevila/index.html">Kompleksna števila</a></div>
        <div class="nav-element"><a href="../../Teorija/Kompleksna_stevila/index.html">Kompleksna števila</a></div>
        <div class="nav-element"><a href="../../Teorija/Kompleksna_stevila/index.html">Kompleksna števila</a></div>
        <div class="nav-element"><a href="../../Teorija/Kompleksna_stevila/index.html">Kompleksna števila</a></div>
        <div class="nav-element"><a href="../../Teorija/Kompleksna_stevila/index.html">Kompleksna števila</a></div>
      </div>
    </div>
    <div class="drzalo">
      <div class="praktika">
        <div class="nav-element"><a href="../../Prikazi/Simpleks/index.html">Simpleks</a></div>
        <div class="nav-element"><a href="../../Prikazi/Kocka-Teserakt-/index.html">Kocka, teserakt in naprej</a></div>
        <div class="nav-element"><a href="../../Prikazi/Liki/index.html">Liki</a></div>
        <div class="nav-element"><a href="../../Prikazi/Oktaeder-in-naprej/index.html">Oktaeder in naprej</a></div>
        <div class="nav-element"><a href="../../Prikazi/Ikozaeder/index.html">Ikozaeder</a></div>
        <div class="nav-element"><a href="../../Prikazi/Dodekaeder/index.html">Dodekaeder</a></div>
        <div class="nav-element"><a href="../../Prikazi/600-Cell/index.html">600-Cell</a></div>
        <div class="nav-element"><a href="../../Prikazi/120-Cell/index.html">120-Cell</a></div>
      </div>
    </div>
  </nav>
  <!-- Konec navigacije -->

  <div class="content">
    <section>
      <label for="text">V to polje vpiši kompleksna števila, ki jih želiš narisati.</label>
      <br>
      <textarea class="textfield" id="zacetne_tocke" name="text" placeholder="Vnesi števila. Primer: (1 + 2i), (1.5 - 7.3i), (5i)" cols="20" rows="15"></textarea>
      <br />
    </section>
    <section>
      <p>
        + za prištevanje, - za odštevanje, * za množenje, / za deljenje, ^ za potenciranje, r za korenjenje.
        Vsaki izmed teh operacij sledi število v oklepajih.
        Konjugirana vrednost se pa označi z !, brez števila.
      </p>
      <label for="text">V to polje vpiši operacije, ki naj jih program izvede na vseh točkah na začetku.</label>
      <br>
      <textarea class="textfield" id="zacetne_operacije" name="text"
        placeholder="Vnesi operacije. \nPrimer: \n+ (1 + 1i)\n!\n* (1i)\n^ (2 + 3i)" cols="20" rows="15"></textarea>
      <br />
    </section>
  </div>
</body>
<script>
  var textAreas = document.getElementsByTagName('textarea');
  Array.prototype.forEach.call(textAreas, function (elem) {
    elem.placeholder = elem.placeholder.replace(/\\n/g, '\n');
  });

  function border(text) {
    if (text.length == 0) {
      return text;
    } else {
      if (" ,;\n\t".includes(text[0])) {
        return border(text.slice(1));
      } else {
        return text;
      }
    }
  }
  function whitespace(text) {
      if (text.length == 0) {
        return text;
      } else {
        if (" \n\t".includes(text[0])) {
          return whitespace(text.slice(1));
        } else {
          return text;
        }
      }
    }
  function oklepaj(text) {
    if (text.length == 0) {
      return text;
    } else {
      if ("([{\"'<|,".includes(text[0])) {
        return border(text.slice(1));
      } else {
        return text;
      }
    }
  }
  function do_zaklepaja(text) {
    if (text.length == 0) {
      return text;
    } else {
      let r = "";
      for (let i = 0; i < text.length; i++) {
        if (")]}\">|;\n,".includes(text[i])) {
          return [r, text.slice(i+1)];
        } else {
          r += text[i];
        }
      }
      return [r, ""];
    }
  }
  function preberi_kompleksno_st(text) {
    text = whitespace(text);
    let real;
    let imag;
    let first = 1;
    if (text[0] == "-") {
      text = text.slice(1);
      first = -1;
    }
    text = whitespace(text);
    first *= parseFloat(text);
    if (first == NaN) {
      first = 0;
    }
    while (text.length && "0123456789.".includes(text[0])) {
      text = text.slice(1);
    }
    text = whitespace(text);
    if (text.length && text[0] == "i") {
      imag = first;
      text = text.slice(1);
    } else {
      real = first;
    }
    text = whitespace(text);

    let second = 1;
    if (text.length && text[0] == "+") {
      text = text.slice(1);
    } else if (text.length && text[0] == "-") {
      text = text.slice(1);
      second *= -1;
    } else {
      //console.log("en člen");
      if (typeof imag == 'undefined') {
        imag = 0;
      } else {
        real = 0;
      }
      return [real, imag];
    }
    text = whitespace(text);
    if (text.length && text[0] == "-") {
      second *= -1;
      text = text.slice(1);
    }
    text = whitespace(text);
    second *= parseFloat(text);
    if (second == NaN) {
      second = 0;
    }
    if (typeof imag == 'undefined') {
      imag = second;
    } else {
      real = second;
    }

    return [real, imag];
  }
  function read_initial_complex_numbers() {
    let text = document.getElementById("zacetne_tocke").value;
    while (text.includes("- ")) {
      text = text.replace("- ", "-");
    }
    let r = [];
    while (text.length > 0) {
      text = border(text);
      text = oklepaj(text);
      if (text.length) {
        let rslt = do_zaklepaja(text);
        let stevilka = rslt[0];
        text = rslt[1];
        
        r.push(preberi_kompleksno_st(stevilka));
      }
    }

    return r;
  }

  function read_operations(text) {
    
  }
</script>
</html>