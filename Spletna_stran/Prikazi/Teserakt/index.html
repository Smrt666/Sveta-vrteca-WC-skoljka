<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Teserakt</title>
    <link rel="stylesheet" type="text/css" href="../../css/universal.css">
    <link rel="stylesheet" type="text/css" href="../../css/prakticno.css">
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../../js/matrix.js"></script>
    <script src="../../js/NDEngine.js"></script>
</head>
<body>
    <header><h1>Teserakt</h1></header>
    <nav>
      <div style="display: flex; flex-direction: row;">
          <div class="nav-element" id="domov"><a href="../../index.html">Uvodna stran</a></div>
          <div class="teorija">
              <div class="nav-element"><a href="../../Teorija/Kompleksna_stevila/index.html">Kompleksna števila</a></div>
              <div class="nav-element"><a href="../../Teorija/Kompleksna_stevila/index.html">Kompleksna števila</a></div>
              <div class="nav-element"><a href="../../Teorija/Kompleksna_stevila/index.html">Kompleksna števila</a></div>
              <div class="nav-element"><a href="../../Teorija/Kompleksna_stevila/index.html">Kompleksna števila</a></div>
             	<div class="nav-element"><a href="../../Teorija/Kompleksna_stevila/index.html">Kompleksna števila</a></div>
          </div>
      </div>
      <div class="praktika">
          <div class="nav-element"><a href="../../Prikazi/Teserakt/index.html">Teserakt</a></div>
          <div class="nav-element"><a href="../../Prikazi/Simpleks/index.html">Simpleks</a></div>
          <div class="nav-element"><a href="../../Prikazi/Kocka-Teserakt-/index.html">Kocka, teserakt in naprej</a></div>
          <div class="nav-element"><a href="../../Prikazi/Liki/index.html">Liki</a></div>
          <div class="nav-element"><a href="../../Prikazi/Oktaeder-in-naprej/">Oktaeder in naprej</a></div>
      </div>
    </nav>
    <div class="content">
        <section>
            <div>
                <span>Določi, kako je teserakt obrnjen.</span> <br>
                <input type="range" min="-360" max="360" value="0" class="slider" id="Angle0" style="width: 100%;"> <br>
                <input type="range" min="-360" max="360" value="0" class="slider" id="Angle1" style="width: 100%;"> <br>
                <input type="range" min="-360" max="360" value="0" class="slider" id="Angle2" style="width: 100%;"> <br>
                <input type="range" min="-360" max="360" value="0" class="slider" id="Angle3" style="width: 100%;"> <br>
                <input type="range" min="-360" max="360" value="0" class="slider" id="Angle4" style="width: 100%;"> <br>
                <input type="range" min="-360" max="360" value="0" class="slider" id="Angle5" style="width: 100%;"> <br>
                <div>
                  <button onclick="javascript: mode=1;">Samodejno vrtenje</button>
                  <button onclick="javascript: mode=0; koti();">Določi kote.</button>
                  <button onclick="javascript: angle0=angle1=angle2=angle3=angle4=angle5=Math.PI/6; koti();">Ponastavi kote.</button>
                </div>
                </div>
                <p>
                <canvas id="canvas" style="width: 100%; height: 100%; border:1px solid #d3d3d3; background-color: white;">
                Your browser does not support the HTML5 canvas tag.</canvas>
                </p>
        </section>
    </div>
</body>
<script>
        var mode = 1;
        var last_timestamp;
        var width = window.innerWidth;
        var height = window.innerHeight;
        var can = document.getElementById("canvas");
        can.width = width;
        can.height = height;
        var ctx = can.getContext("2d");
        var r_near = 0.1;
        var r_far = 1000.0;
    
        var fiel_of_view = 90.0; // stopinj
        var aspect_ratio = height / width;
    
        var Fov_scaling_factor = 1 / Math.tan(0.5 * fiel_of_view / 180 * Math.PI);
        var q = r_far / (r_far - r_near)
    
   
        var tesseract = [
          [[-1, -1, -1, -1], [-1, -1, -1, 1], [-1, -1, 1, 1], [-1, -1, 1, -1]], 
          [[-1, -1, -1, -1], [-1, -1, -1, 1], [-1, 1, -1, 1], [-1, 1, -1, -1]], 
          [[-1, -1, -1, -1], [-1, -1, -1, 1], [1, -1, -1, 1], [1, -1, -1, -1]], 
          [[-1, -1, -1, -1], [-1, -1, 1, -1], [-1, 1, 1, -1], [-1, 1, -1, -1]], 
          [[-1, -1, -1, -1], [-1, -1, 1, -1], [1, -1, 1, -1], [1, -1, -1, -1]], 
          [[-1, -1, -1, -1], [-1, 1, -1, -1], [1, 1, -1, -1], [1, -1, -1, -1]], 
          [[-1, -1, -1, 1], [-1, -1, 1, 1], [-1, 1, 1, 1], [-1, 1, -1, 1]], 
          [[-1, -1, -1, 1], [-1, -1, 1, 1], [1, -1, 1, 1], [1, -1, -1, 1]], 
          [[-1, -1, -1, 1], [-1, 1, -1, 1], [1, 1, -1, 1], [1, -1, -1, 1]], 
          [[-1, -1, 1, -1], [-1, -1, 1, 1], [-1, 1, 1, 1], [-1, 1, 1, -1]], 
          [[-1, -1, 1, -1], [-1, -1, 1, 1], [1, -1, 1, 1], [1, -1, 1, -1]], 
          [[-1, -1, 1, -1], [-1, 1, 1, -1], [1, 1, 1, -1], [1, -1, 1, -1]], 
          [[-1, -1, 1, 1], [-1, 1, 1, 1], [1, 1, 1, 1], [1, -1, 1, 1]], 
          [[-1, 1, -1, -1], [-1, 1, -1, 1], [-1, 1, 1, 1], [-1, 1, 1, -1]], 
          [[-1, 1, -1, -1], [-1, 1, -1, 1], [1, 1, -1, 1], [1, 1, -1, -1]], 
          [[-1, 1, -1, -1], [-1, 1, 1, -1], [1, 1, 1, -1], [1, 1, -1, -1]], 
          [[-1, 1, -1, 1], [-1, 1, 1, 1], [1, 1, 1, 1], [1, 1, -1, 1]], 
          [[-1, 1, 1, -1], [-1, 1, 1, 1], [1, 1, 1, 1], [1, 1, 1, -1]], 
          [[1, -1, -1, -1], [1, -1, -1, 1], [1, -1, 1, 1], [1, -1, 1, -1]], 
          [[1, -1, -1, -1], [1, -1, -1, 1], [1, 1, -1, 1], [1, 1, -1, -1]], 
          [[1, -1, -1, -1], [1, -1, 1, -1], [1, 1, 1, -1], [1, 1, -1, -1]], 
          [[1, -1, -1, 1], [1, -1, 1, 1], [1, 1, 1, 1], [1, 1, -1, 1]], 
          [[1, -1, 1, -1], [1, -1, 1, 1], [1, 1, 1, 1], [1, 1, 1, -1]], 
          [[1, 1, -1, -1], [1, 1, -1, 1], [1, 1, 1, 1], [1, 1, 1, -1]]
        ];
    
        var move = [0, 0, 3.5, 0];
        var angle0 = Math.PI/6;;
        var angle1 = Math.PI/6;;
        var angle2 = Math.PI/6;;
        var angle3 = Math.PI/6;;
        var angle4 = Math.PI/6;;
        var angle5 = 0;
        var rotate0;
        var rotate1;
        var rotate2;
        var rotate3;
        var rotate4;
        var rotate5;
        var rotate;

        function koti() {
          document.getElementById("Angle0").value = angle0 * 180 / Math.PI;
          document.getElementById("Angle1").value = angle1 * 180 / Math.PI;
          document.getElementById("Angle2").value = angle2 * 180 / Math.PI;
          document.getElementById("Angle3").value = angle3 * 180 / Math.PI;
          document.getElementById("Angle4").value = angle4 * 180 / Math.PI;
          document.getElementById("Angle5").value = angle5 * 180 / Math.PI;
        }
        
        function update_matrices() {
          // x -> y
          rotate0 = [
            [Math.cos(angle0), -Math.sin(angle0), 0, 0], 
            [Math.sin(angle0), Math.cos(angle0), 0, 0], 
            [0, 0, 1, 0],
            [0, 0, 0, 1]
          ];
          // x -> z
          rotate1 = [
            [Math.cos(angle1), 0, -Math.sin(angle1), 0], 
            [0, 1, 0, 0], 
            [Math.sin(angle1), 0, Math.cos(angle1), 0],
            [0, 0, 0, 1]
          ];
          // y -> z
          rotate2 = [
            [1, 0, 0, 0], 
            [0, Math.cos(angle2), -Math.sin(angle2), 0], 
            [0, Math.sin(angle2), Math.cos(angle2), 0],
            [0, 0, 0, 1]
          ];
          // x -> w
          rotate3 = [
            [Math.cos(angle3), 0, 0, -Math.sin(angle3)],
            [0, 1, 0, 0],
            [0, 0, 1, 0],
            [Math.sin(angle3), 0, 0, Math.cos(angle3)]
          ];
          // y -> w
          rotate4 = [
            [1, 0, 0, 0],
            [0, Math.cos(angle4), 0, -Math.sin(angle4)],
            [0, 0, 1, 0],
            [0, Math.sin(angle4), 0, Math.cos(angle4)]
          ];
          // z -> w
          rotate5 = [
            [1, 0, 0, 0],
            [0, 1, 0, 0],
            [0, 0, Math.cos(angle5), -Math.sin(angle5)],
            [0, 0, Math.sin(angle5), Math.cos(angle5)]
          ];
          rotate = matrix_mul(matrix_mul(matrix_mul(matrix_mul(matrix_mul(rotate5, rotate4), rotate3), rotate2), rotate1), rotate0);
          // rotate = rotate5;// matrix_mul(rotate4, rotate5); // 0,3; 0,4; 2,3-obrni?
        }
    
        function update_angles() {
          if (mode == 0) {
            angle0 = parseFloat(document.getElementById("Angle0").value) / 180 * Math.PI;
            angle1 = parseFloat(document.getElementById("Angle1").value) / 180 * Math.PI;
            angle2 = parseFloat(document.getElementById("Angle2").value) / 180 * Math.PI;
            angle3 = parseFloat(document.getElementById("Angle3").value) / 180 * Math.PI;
            angle4 = parseFloat(document.getElementById("Angle4").value) / 180 * Math.PI;
            angle5 = parseFloat(document.getElementById("Angle5").value) / 180 * Math.PI;
          } else {
            // angle0 = Math.PI/6; //(angle0 + 0.01) % (2 * Math.PI);
            // angle1 = Math.PI/6; //(angle1 + 0.01) % (2 * Math.PI);
            // angle2 = Math.PI/6; //(angle2 + 0.01) % (2 * Math.PI);
            // angle3 = Math.PI/6; //(angle3 + 0.01) % (2 * Math.PI);
            // angle4 = Math.PI/6; //(angle4 + 0.01) % (2 * Math.PI);
            angle5 = (angle5 + 0.01) % (2 * Math.PI);
            koti();
          }
        }
    
        update_matrices();
        function mainloop(timestamp) {
          draw(tesseract, ctx, move, rotate);
    
          update_angles();
          update_matrices();
    
          last_timestamp = timestamp;
          requestAnimationFrame(mainloop);
        }
        requestAnimationFrame(mainloop);
      </script>
</html>